https://github.com/Xpra-org/xpra/wiki/Download#-linux




apt-get update && apt-get upgrade  


apt install aptitude 


aptitude 


apt install ubuntu-desktop 


apt update


apt install apt-transport-https software-properties-common


apt install ca-certificates


wget -O "/usr/share/keyrings/xpra.asc" https://xpra.org/xpra.asc


wget -O "/etc/apt/sources.list.d/xpra.sources" https://xpra.org/repos/$DISTRO/xpra.sources


apt update


apt install xpra


xpra --version


ls -l /etc/apt/sources.list.d/


cat /etc/apt/sources.list.d/xpra.sources


apt install net-tools
sudo lsof -i :14500


sudo netstat -tulpn | grep 14500


xpra start-desktop :100 --start=gnome-session --bind-tcp=0.0.0.0:14501 --html=on --daemon=no


sudo snap install core; sudo snap refresh core


sudo snap install --classic certbot


sudo ln -s /snap/bin/certbot /usr/bin/certbot


For Nginx:
sudo certbot --nginx -d caspermedved.com -d www.caspermedved.com


For Apache: 
sudo certbot --apache -d caspermedved.com -d www.caspermedved.com


sudo apt update


sudo apt install nginx


sudo systemctl status nginx


which nginx


export PATH=$PATH:/usr/sbin


source ~/.bashrc


sudo nano /etc/nginx/sites-available/caspermedved.com




server {
    listen 80;
    listen [::]:80;
    server_name caspermedved.com www.caspermedved.com;


    # Redirect all HTTP traffic to HTTPS.
    return 301 https://$host$request_uri;
}


server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2 ipv6only=on;
    server_name caspermedved.com www.caspermedved.com;


    root /var/www/html;
    index index.html index.htm index.nginx-debian.html;


    ssl_certificate /etc/letsencrypt/live/caspermedved.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/caspermedved.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;


    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options SAMEORIGIN always;
    add_header X-Content-Type-Options nosniff always;
    add_header Referrer-Policy no-referrer-when-downgrade always;
    add_header Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';" always;
    add_header X-XSS-Protection "1; mode=block" always;


    location /xpra {
        proxy_pass http://127.0.0.1:14501/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }


    location / {
        try_files $uri $uri/ =404;
    }


    access_log /var/log/nginx/caspermedved.com.access.log;
    error_log /var/log/nginx/caspermedved.com.error.log;
}






sudo ln -s /etc/nginx/sites-available/caspermedved.com /etc/nginx/sites-enabled/
sudo nginx -t


sudo systemctl reload nginx


sudo rm /etc/nginx/sites-enabled/default


sudo rm /etc/nginx/sites-enabled/caspermedved.com


sudo nano /etc/nginx/sites-available/caspermedved.com


##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
# https://wiki.debian.org/Nginx/DirectoryStructure
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##


# Redirect HTTP to HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name caspermedved.com www.caspermedved.com;


    # Redirect all HTTP traffic to HTTPS
    return 301 https://$host$request_uri;
}


# HTTPS configuration
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2 ipv6only=on;
    server_name caspermedved.com www.caspermedved.com;


    # SSL certificates provided by Certbot
    ssl_certificate /etc/letsencrypt/live/caspermedved.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/caspermedved.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;


    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options SAMEORIGIN always;
    add_header X-Content-Type-Options nosniff always;
    add_header Referrer-Policy no-referrer-when-downgrade always;
    add_header Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';" always;
    add_header X-XSS-Protection "1; mode=block" always;


    # Proxy configuration for Xpra
    location / {
        proxy_pass http://127.0.0.1:14501/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }


    # Logs
    access_log /var/log/nginx/caspermedved.com.access.log;
    error_log /var/log/nginx/caspermedved.com.error.log;


sudo ln -s /etc/nginx/sites-available/caspermedved.com /etc/nginx/sites-enabled/


sudo nginx -t


sudo systemctl reload nginx


sudo chown username:username /root/.Xauthority


sudo chmod 600 /root/.Xauthority


xpra start-desktop :100 --start=gnome-session --bind-tcp=127.0.0.1:14501 --html=on --daemon=no --debug=all


ls -la ~/.Xauthority


sudo find / -name .Xauthority 2>/dev/null


sudo ls -la /root/.Xauthority


sudo setcap 'cap_net_bind_service=+ep' /path/to/xpra


which xpra


sudo apt-get install authbind


authbind --deep xpra start-desktop :100 --start=gnome-session --bind-tcp=0.0.0.0:443 --html=on --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --daemon=no




sudo setcap 'cap_net_bind_service=+ep' /usr/bin/xpra


getcap /usr/bin/xpra


xpra start-desktop :100 --start=gnome-session --bind-tcp=0.0.0.0:443 --html=on --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --daemon=no
sudo apt install gnome-core


xpra stop :100


xpra start-desktop :100 --start=gnome-session --bind-tcp=0.0.0.0:14501 --html=on --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --daemon=no


sudo apt install nvidia-driver-510


glxinfo | grep "OpenGL renderer"


sudo apt install python3-zeroconf


dpkg -l | grep nvidia


sudo apt-get purge nvidia-*


sudo ubuntu-drivers autoinstall


sudo add-apt-repository ppa:graphics-drivers/ppa


sudo apt update


sudo ubuntu-drivers autoinstall


lsmod | grep nvidia


sudo modprobe nvidia


dmesg | grep NVRM


sudo dkms status


sudo dkms remove nvidia/535 --all


sudo dkms install nvidia/535


sudo apt-get purge nvidia-*


sudo ubuntu-drivers autoinstall


cat /etc/modprobe.d/blacklist.conf | grep nouveau


echo "blacklist nouveau" | sudo tee -a /etc/modprobe.d/blacklist.conf


sudo update-initramfs -u


sudo reboot


nvidia-smi


dmesg | grep NVRM


sudo nvidia-xconfig


xpra start-desktop :100 --start=xterm --bind-tcp=0.0.0.0:14501 --html=on --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --daemon=no --video-encoders=nvenc


xpra info | grep rendering


xpra info | grep encoder


sudo apt update


sudo apt install xorg pkg-config xserver-xorg
sudo nvidia-xconfig


sudo nano /etc/X11/xorg.conf


Look for sections like Device that mention the NVIDIA driver. It should look something like this:


Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
EndSection


sudo reboot


cat /var/log/Xorg.0.log | grep EE 


cat /var/log/Xorg.0.log | grep WW


xpra list


xpra status :100


xpra start-desktop :100 --start-child="xfce4-session" --start-child="xterm" --bind-tcp=0.0.0.0:14501 --html=on --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --daemon=no


xpra start-desktop :100 --start="gnome-session" --start-child="gnome-terminal" --bind-tcp=0.0.0.0:14501 --html=on --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --daemon=no




sudo apt-get install gnome-session gnome-terminal


xpra start-desktop :100 --start=gnome-session --bind-tcp=0.0.0.0:14501 --html=on --daemon=no
sudo netstat -tulpn | grep ':80\|:443'


sudo apt update


sudo apt install apache2


sudo a2enmod proxy proxy_http ssl headers


sudo nano /etc/apache2/sites-available/caspermedved.com.conf




<VirtualHost *:80>
    ServerName caspermedved.com
    ServerAlias www.caspermedved.com
    Redirect permanent / https://caspermedved.com/
</VirtualHost>


<VirtualHost *:443>
    ServerAdmin webmaster@caspermedved.com
    ServerName caspermedved.com
    ServerAlias www.caspermedved.com


    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / http://127.0.0.1:14501/
    ProxyPassReverse / http://127.0.0.1:14501/
    
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/caspermedved.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/caspermedved.com/privkey.pem
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite HIGH:!aNULL:!MD5
    
    # Security headers
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set Referrer-Policy "no-referrer-when-downgrade"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';"
    Header always set X-XSS-Protection "1; mode=block"


    # Logs
    ErrorLog ${APACHE_LOG_DIR}/caspermedved.com_error.log
    CustomLog ${APACHE_LOG_DIR}/caspermedved.com_access.log combined
</VirtualHost>




sudo a2ensite caspermedved.com
sudo systemctl restart apache2


sudo nano /etc/apache2/ports.conf


Check and correct log file paths:


Verify the paths specified for log files in Apache's configuration (apache2.conf and site configuration files) are correct and accessible. The default should usually work unless customized:
apache


ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined


sudo chown -R www-data:www-data /var/log/apache2


sudo chmod -R 755 /var/log/apache2


sudo apachectl configtest


sudo systemctl restart apache


sudo nano /etc/apache2/sites-available/caspermedved.com.conf




























<VirtualHost *:80>
    ServerName caspermedved.com
    ServerAlias www.caspermedved.com
    Redirect permanent / https://caspermedved.com/
</VirtualHost>


<VirtualHost *:443>
    ServerAdmin webmaster@caspermedved.com
    ServerName caspermedved.com
    ServerAlias www.caspermedved.com


    # SSL Configuration
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/caspermedved.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/caspermedved.com/privkey.pem
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256
    SSLHonorCipherOrder on


    # Security headers
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set Referrer-Policy "no-referrer-when-downgrade"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';"
    Header always set X-XSS-Protection "1; mode=block"


    # Proxy configuration to forward requests to Xpra running on port 14501
    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / http://127.0.0.1:14501/
    ProxyPassReverse / http://127.0.0.1:14501/


    # Logs
    ErrorLog ${APACHE_LOG_DIR}/caspermedved.com_error.log
    CustomLog ${APACHE_LOG_DIR}/caspermedved.com_access.log combined
</VirtualHost>


sudo a2ensite caspermedved.com.conf


sudo a2enmod ssl


sudo a2enmod proxy


sudo a2enmod proxy_http
sudo a2enmod headers


sudo apachectl configtest


sudo systemctl restart apache2


sudo apt update


sudo apt install xpra gnome-shell


sudo mkdir -p /var/www/html


ls -l /var/www/html


sudo chown -R www-data:www-data /var/www/html


sudo chmod -R 755 /var/www/html


sudo certbot certonly --webroot -w /var/www/html -d caspermedved.com -d www.caspermedved.com


cat /var/log/letsencrypt/letsencrypt.log


sudo certbot certonly --standalone -d caspermedved.com -d www.caspermedved.com


echo "Hello, world!" | sudo tee /var/www/html/index.html


sudo mkdir -p /var/www/html/.well-known/acme-challenge


sudo chown -R www-data:www-data /var/www/html/.well-known


sudo chmod -R 755 /var/www/html/.well-known


echo "Test file" | sudo tee /var/www/html/.well-known/acme-challenge/testfile
sudo adduser xprauser


sudo chown xprauser:xprauser /etc/letsencrypt/live/caspermedved.com/fullchain.pem


sudo chown xprauser:xprauser /etc/letsencrypt/live/caspermedved.com/privkey.pem


export XDG_RUNTIME_DIR=/run/user/$(id -u xprauser)


sudo mkdir -p $XDG_RUNTIME_DIR


sudo chown xprauser:xprauser $XDG_RUNTIME_DIR


xpra start :100 --start-child="gnome-session" --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem --bind-ssl=0.0.0.0:14501 --html=on --daemon=no --debug=all


sudo apt-get install build-essential


git clone https://github.com/mcfletch/pyopengl.git


cd pyopengl/accelerate


sudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev wget


sudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev libsqlite3-dev wget libbz2-dev


git clone https://github.com/madler/zlib.git


cd zlib


latest_tag=$(git describe --tags $(git rev-list --tags --max-count=1))


wget https://github.com/madler/zlib/archive/$latest_tag.tar.gz
tar -xzvf $latest_tag.tar.gz


./configure


sudo make install


make


grep "#define ZLIB_VERSION" zlib.h


git clone https://github.com/python/cpython.git


cd cpython


./configure


make


sudo make install


sudo apt-get update


sudo apt-get install i965-va-driver-shaders mesa-va-drivers


sudo apt-get install gstreamer1.0-vaapi


sudo apt-get install gstreamer1.0-plugins-{base,good,bad,ugly}


sudo apt-get install gstreamer1.0-libav




sudo apt-get update


sudo apt-get install xvfb


export DISPLAY=:100


sudo apt-get install v4l2loopback-dkms


sudo modprobe v4l2loopback


ls /dev/video*


sudo apt-get install mesa-utils


Xvfb :100 -screen 0 1024x768x24 +extension GLX &


ps aux | grep Xvfb


sudo rm /tmp/.X100-lock


Xvfb :100 -screen 0 1024x768x24 +extension GLX &


export DISPLAY=:100


xpra start :100 \
    --start-child="gnome-session" \
    --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem \
    --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem \
    --bind-ssl=0.0.0.0:14501 \
    --html=on \
    --daemon=no \
    --debug=error \
    --keyboard-layout=us \
    --input-method=none \
    --opengl=yes




sudo apt install xpra gnome-shell


xpra info :100


sudo certbot certonly --webroot -w /var/www/html -d caspermedved.com -d www.caspermedved.com


sudo certbot certonly --standalone -d caspermedved.com -d www.caspermedved.com


ls -l /var/www/html


sudo mkdir -p /var/www/html


sudo chown -R www-data:www-data /var/www/html


sudo chmod -R 755 /var/www/html


sudo certbot certonly --webroot -w /var/www/html -d caspermedved.com -d www.caspermedved.com


echo "Hello, world!" | sudo tee /var/www/html/index.html


sudo chown -R www-data:www-data /var/www/html


sudo chmod -R 755 /var/www/html


echo "Test file" | sudo tee /var/www/html/.well-known/acme-challenge/testfile


sudo certbot certonly --standalone -d caspermedved.com -d www.caspermedved.com


sudo mkdir -p /var/www/html/.well-known/acme-challenge


sudo chown -R www-data:www-data /var/www/html/.well-known


sudo chmod -R 755 /var/www/html/.well-known
echo "Test file" | sudo tee /var/www/html/.well-known/acme-challenge/testfile


curl http://caspermedved.com/.well-known/acme-challenge/testfile


echo $DISPLAY


sudo nano /etc/ssh/sshd_config


uncomment: X11DisplayOffset 10


sudo systemctl restart sshd


sshd -T | grep x11displayoffset


xpra start :100 \
    --start-child="gnome-session" \
    --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem \
    --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem \
    --bind-ssl=0.0.0.0:14501 \
    --html=on \
    --daemon=no \
    --debug=all \
    --keyboard-layout=us \
    --input-method=none


sudo apt-get install x264


xpra codecs


xpra --help | grep encoding


xpra start :100 \
    --start-child="gnome-session" \
    --ssl-cert=/etc/letsencrypt/live/caspermedved.com/fullchain.pem \
    --ssl-key=/etc/letsencrypt/live/caspermedved.com/privkey.pem \
    --bind-ssl=0.0.0.0:14501 \
    --html=on \
    --daemon=no \
    --debug=all \
    --keyboard-layout=us \
    --input-method=none \
    --encodings=jpeg,png,webp,vp9 \
    --compress=6 \
    --quality=90 \
    --speed=80 \
    --video-encoders=ffmpeg,vpx \
    --opengl=yes


sudo apt-get update


sudo apt-get install software-properties-common


sudo add-apt-repository universe


sudo add-apt-repository ppa:certbot/certbot


sudo certbot certonly --standalone -d caspermedved.com -d www.caspermedved.com


sudo apt-get update


sudo apt-get install certbot


git clone https://github.com/certbot/certbot.git


cd certbot


sudo apt-get install -y python3 python3-pip python3-setuptools python3-wheel


sudo apt-get install -y software-properties-common build-essential libssl-dev libffi-dev python3-dev python3-venv python3-pip


sudo apt-get update


sudo apt-get install -y autoconf automake libtool pkg-config git \
    build-essential libglib2.0-dev libva-dev libdrm-dev


git clone https://gitlab.freedesktop.org/gstreamer/gstreamer.git


git clone https://gitlab.freedesktop.org/gstreamer/gst-plugins-base.git


sudo apt install libgtk-3-dev


git clone https://github.com/skvadrik/re2c.git


./autogen.sh


./configure


make


sudo make install


re2c --version


git clone https://github.com/ninja-build/ninja.git


cd ninja


./configure.py --bootstrap


sudo cp ninja /usr/local/bin/


cd ..




git clone https://github.com/mesonbuild/meson.git


cd meson


python3 -m pip install --upgrade --force-reinstall meson


python3 -m pip install --upgrade meson


python3 -m pip cache purge


/usr/local/bin/meson --version
echo $PATH


nano ~/.bashrc
nano ~/.zshrc


ADD THIS TO THE END OF THE FILE:
export PATH="/usr/local/bin:$PATH"


source ~/.bashrc


meson --version
ninja --version


cd gstreamer


git clone https://github.com/jorisroovers/gitlint.git


cd gitlint


python3 -m pip install poetry


poetry init


poetry add gitlint


poetry install


pip3 install gitlint


cd ..


wget "https://ftp.gnu.org/pub/gnu/bison/$(curl -s https://ftp.gnu.org/pub/gnu/bison/ | grep -o 'bison-[0-9.]*\.tar\.gz' | sort -V | tail -n1)"


tar -xzf $(ls | grep -o 'bison-[0-9.]*\.tar\.gz' | sort -V | tail -n1)


cd bison-3.8.2


./configure


make


sudo make install


bison --version


cd ..


wget "https://ftp.gnu.org/pub/gnu/gettext/$(curl -s https://ftp.gnu.org/pub/gnu/gettext/ | grep -o 'gettext-[0-9.]*\.tar\.gz' | sort -V | tail -n1)"


tar -xzf "$(ls | grep -o 'gettext-[0-9.]*\.tar\.gz' | sort -V | tail -n1)"


cd gettext-0.22.5


./configure


make


sudo make install
